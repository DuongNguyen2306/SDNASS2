<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Questions</h2>
  <a class="btn btn-primary" href="/questions/new">New Question</a>
  </div>

<% if (typeof error !== 'undefined' && error) { %>
  <div class="alert alert-warning">Không tải được danh sách từ API: <%= error %></div>
<% } %>

<form class="row g-2 mb-3" method="get" action="/questions/go">
  <div class="col-auto">
    <input type="text" name="id" class="form-control" placeholder="Enter question ID" required />
  </div>
  <div class="col-auto">
    <button type="submit" class="btn btn-outline-secondary">Go to detail</button>
  </div>
</form>

<div class="table-responsive">
  <table class="table table-striped align-middle">
    <thead>
      <tr>
        <th>#</th>
        <th>Text</th>
        <th>Options</th>
        <th>Correct</th>
        <th>Keywords</th>
        <th class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% if (Array.isArray(questions) && questions.length) { %>
        <% questions.forEach((q, idx) => { %>
          <tr>
            <td><%= idx + 1 %></td>
            <td><a href="/questions/<%= q._id %>"><%= q.text %></a></td>
            <td>
              <ul class="mb-0">
                <% (q.options || []).forEach((opt, i) => { %>
                  <li><%= opt %></li>
                <% }) %>
              </ul>
            </td>
            <td><span class="badge bg-success"><%= q.correctAnswerIndex %></span></td>
            <td>
              <% (q.keywords || []).forEach(k => { %>
                <span class="badge bg-secondary me-1"><%= k %></span>
              <% }) %>
            </td>
            <td class="text-end">
              <div class="btn-group" role="group">
                <a class="btn btn-sm btn-outline-primary" href="/questions/<%= q._id %>/edit">Edit</a>
                <form action="/questions/<%= q._id %>?_method=DELETE" method="post" class="ms-1">
                  <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete this question?')">Delete</button>
                </form>
              </div>
            </td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr><td colspan="6" class="text-center text-muted">No questions.</td></tr>
      <% } %>
    </tbody>
  </table>
</div>

