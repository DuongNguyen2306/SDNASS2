<h2><%= mode === 'edit' ? 'Edit Question' : 'Create Question' %></h2>

<form action="<%= mode === 'edit' ? ('/questions/' + question._id + '?_method=PUT') : '/questions' %>" method="post" class="mt-3">
  <div class="mb-3">
    <label class="form-label">Text</label>
    <input type="text" name="text" class="form-control" value="<%= question.text || '' %>" placeholder="What is the capital of France?" required />
  </div>

  <div class="mb-3">
    <label class="form-label">Options (each line is one option)</label>
    <textarea name="options" class="form-control" rows="4" placeholder="Paris
London
Rome
Berlin"><%= (question.options || []).join('\n') %></textarea>
  </div>

  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Correct Answer Index</label>
      <select name="correctAnswerIndex" class="form-select">
        <% for (let i = 0; i < Math.max(4, (question.options || []).length); i++) { %>
          <option value="<%= i %>" <%= Number(question.correctAnswerIndex) === i ? 'selected' : '' %>><%= i %></option>
        <% } %>
      </select>
    </div>
    <div class="col-md-6">
      <label class="form-label">Keywords (comma separated)</label>
      <input type="text" name="keywords" class="form-control" value="<%= (question.keywords || []).join(', ') %>" placeholder="capital, Europe" />
    </div>
  </div>

  <div class="mt-4 d-flex gap-2">
    <button type="submit" class="btn btn-primary"><%= mode === 'edit' ? 'Update' : 'Create' %></button>
    <a href="/questions" class="btn btn-secondary">Cancel</a>
  </div>
</form>

